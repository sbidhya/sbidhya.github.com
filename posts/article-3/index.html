<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Prefer initializer list for variable initialization | Bidhya`s Post</title>
<meta name="keywords" content="">
<meta name="description" content="Implicit conversion is a convenience that C&#43;&#43; offers to programmers. However, sometimes this can cause unexpected results. It is always a good rule of thumb to be explicit when expressing your intent. The following code snippet demonstrates how implicit conversion (both narrowing and widening) can be useful and can avoid casting between data types manually.
#include&lt;iostream&gt; int main() { int num = 10.2; // Implicitly converts float to num which is fine at the cost of loosing precision float radius = 10; // Implicity converts int to float.">
<meta name="author" content="">
<link rel="canonical" href="https://sbidhya.github.io/posts/article-3/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://sbidhya.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://sbidhya.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://sbidhya.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://sbidhya.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://sbidhya.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Prefer initializer list for variable initialization" />
<meta property="og:description" content="Implicit conversion is a convenience that C&#43;&#43; offers to programmers. However, sometimes this can cause unexpected results. It is always a good rule of thumb to be explicit when expressing your intent. The following code snippet demonstrates how implicit conversion (both narrowing and widening) can be useful and can avoid casting between data types manually.
#include&lt;iostream&gt; int main() { int num = 10.2; // Implicitly converts float to num which is fine at the cost of loosing precision float radius = 10; // Implicity converts int to float." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sbidhya.github.io/posts/article-3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-10T11:36:24-05:00" />
<meta property="article:modified_time" content="2024-02-10T11:36:24-05:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Prefer initializer list for variable initialization"/>
<meta name="twitter:description" content="Implicit conversion is a convenience that C&#43;&#43; offers to programmers. However, sometimes this can cause unexpected results. It is always a good rule of thumb to be explicit when expressing your intent. The following code snippet demonstrates how implicit conversion (both narrowing and widening) can be useful and can avoid casting between data types manually.
#include&lt;iostream&gt; int main() { int num = 10.2; // Implicitly converts float to num which is fine at the cost of loosing precision float radius = 10; // Implicity converts int to float."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://sbidhya.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Prefer initializer list for variable initialization",
      "item": "https://sbidhya.github.io/posts/article-3/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Prefer initializer list for variable initialization",
  "name": "Prefer initializer list for variable initialization",
  "description": "Implicit conversion is a convenience that C++ offers to programmers. However, sometimes this can cause unexpected results. It is always a good rule of thumb to be explicit when expressing your intent. The following code snippet demonstrates how implicit conversion (both narrowing and widening) can be useful and can avoid casting between data types manually.\n#include\u0026lt;iostream\u0026gt; int main() { int num = 10.2; // Implicitly converts float to num which is fine at the cost of loosing precision float radius = 10; // Implicity converts int to float.",
  "keywords": [
    
  ],
  "articleBody": "Implicit conversion is a convenience that C++ offers to programmers. However, sometimes this can cause unexpected results. It is always a good rule of thumb to be explicit when expressing your intent. The following code snippet demonstrates how implicit conversion (both narrowing and widening) can be useful and can avoid casting between data types manually.\n#include int main() { int num = 10.2; // Implicitly converts float to num which is fine at the cost of loosing precision float radius = 10; // Implicity converts int to float. std::cout \u003c\u003c \"Num: \" \u003c\u003c num \u003c\u003c \" Radius: \" \u003c\u003c radius \u003c\u003c std::endl; size_t sz = -1; // size_t is a type which stores size of anything i.e positive numbers std::cout \u003c\u003c \"Size: \" \u003c\u003c sz \u003c\u003c std::endl; /** Output Num: 10 Radius: 10 Size: 18446744073709551615 */ return 0; } As we can see here, the conversion can cause surprising results. For some reason, if someone happens to assign a negative number to size_t, it will convert it to the maximum positive number size_t can store in the system. Here, size is equal to 2^64 - 1. To avoid these surprises, prefer to use initializer lists. The code below does not compile, and it is a good thing as it will surface the narrowing conversion and one can take action. Compilation time error is always better than runtime bugs. Note that float radius{10}; works fine. This is because widening conversion generally increases precision and is considered acceptable.\nint main() { int num{10.2}; float radius{10}; size_t sz{-1}; /** * Compilation error 1: type 'double' cannot be narrowed to 'int' in initializer list * Compilation error 2: constant expression evaluates to -1 which cannot be narrowed to type 'size_t' */ return 0; } ",
  "wordCount" : "290",
  "inLanguage": "en",
  "datePublished": "2024-02-10T11:36:24-05:00",
  "dateModified": "2024-02-10T11:36:24-05:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sbidhya.github.io/posts/article-3/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Bidhya`s Post",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sbidhya.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://sbidhya.github.io/" accesskey="h" title="Bidhya`s Post (Alt + H)">Bidhya`s Post</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://sbidhya.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://sbidhya.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Prefer initializer list for variable initialization
    </h1>
    <div class="post-meta"><span title='2024-02-10 11:36:24 -0500 EST'>February 10, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;290 words

</div>
  </header> 
  <div class="post-content"><p>Implicit conversion is a convenience that C++ offers to programmers. However, sometimes this can cause unexpected results. It is always a good rule of thumb to be explicit when expressing your intent. The following code snippet demonstrates how implicit conversion (both narrowing and widening) can be useful and can avoid casting between data types manually.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> num <span style="color:#f92672">=</span> <span style="color:#ae81ff">10.2</span>;    <span style="color:#75715e">// Implicitly converts float to num which is fine at the cost of loosing precision
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">float</span> radius <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>; <span style="color:#75715e">// Implicity converts int to float.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Num: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> num <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34; Radius: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> radius <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  size_t sz <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>; <span style="color:#75715e">// size_t is a type which stores size of anything i.e positive numbers
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Size: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> sz <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/** Output
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    Num: 10 Radius: 10
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    Size: 18446744073709551615
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  */</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>As we can see here, the conversion can cause surprising results. For some reason, if someone happens to assign a negative number to <code>size_t</code>, it will convert it to the maximum positive number <code>size_t</code> can store in the system. Here, size is equal to <code>2^64 - 1</code>. To avoid these surprises, prefer to use initializer lists. The code below does not compile, and it is a good thing as it will surface the narrowing conversion and one can take action. Compilation time error is always better than runtime bugs. Note that <code>float radius{10};</code> works fine. This is because widening conversion generally increases precision and is considered acceptable.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> num{<span style="color:#ae81ff">10.2</span>};
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">float</span> radius{<span style="color:#ae81ff">10</span>};
</span></span><span style="display:flex;"><span>  size_t sz{<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>};
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * Compilation error 1: type &#39;double&#39; cannot be narrowed to &#39;int&#39; in initializer list
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * Compilation error 2: constant expression evaluates to -1 which cannot be narrowed to type &#39;size_t&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="next" href="https://sbidhya.github.io/posts/article-2/">
    <span class="title">Next »</span>
    <br>
    <span>Avoid Unintentional Copying in C&#43;&#43; Containers</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://sbidhya.github.io/">Bidhya`s Post</a></span>
    <span>
        Powered by
        <a href="https://github.com/sbidhya" rel="noopener" target="_blank">sbidhya</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
